{"is_source_file": true, "format": "TypeScript", "description": "This file defines a composable module 'useAuth' for client-side authentication management in a frontend application. It includes types and functions for user registration, login, logout, and session management, utilizing local storage and a hashing utility.", "external_files": ["@/utils/hash"], "external_methods": ["hashPassword"], "published": ["useAuth"], "classes": [], "methods": [{"name": "export function useAuth() { useAuth", "description": "Main function providing authentication state and methods such as register, login, logout, and currentUser.", "scope": "", "scopeKind": ""}, {"name": "loadFromStorage", "description": "Loads user and session data from local storage upon client-side initialization."}, {"name": "register", "description": "Registers a new user, storing their details and creating an initial session."}, {"name": "login", "description": "Authenticates a user by verifying email and password, and sets the session."}, {"name": "logout", "description": "Clears the current session, effectively logging out the user."}, {"name": "currentUser", "description": "Returns a reactive reference to the current user object or null."}], "calls": ["useStorage()", "getItem", "setItem", "removeItem", "ensureId", "hashPassword"], "search-terms": ["useAuth", "session management", "client-side authentication", "local storage", "hashPassword utility"], "state": 2, "file_id": 11, "knowledge_revision": 23, "git_revision": "", "ctags": [{"_type": "tag", "name": "Session", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^type Session = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "User", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^type User = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "createdAt", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^    const u: User = { id, email, passwordHash, createdAt: new Date().toISOString() }$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^    const u: User = { id, email, passwordHash, createdAt: new Date().toISOString() }$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "ensureId", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^  const { getItem, setItem, removeItem, ensureId } = useStorage()$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "existing", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^    const existing = getItem<User | null>('user', null)$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "getItem", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^  const { getItem, setItem, removeItem, ensureId } = useStorage()$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^    const id = ensureId()$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "isAuthenticated", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^  const isAuthenticated = computed(() => !!session.value?.token && !!user.value)$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "pass", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^    const pass = await hashPassword(email, password)$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "passwordHash", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^    const passwordHash = await hashPassword(email, password)$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "passwordHash", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^    const u: User = { id, email, passwordHash, createdAt: new Date().toISOString() }$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "removeItem", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^  const { getItem, setItem, removeItem, ensureId } = useStorage()$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "s", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^    const s = getItem<Session | null>('session', null)$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "s", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^    const s: Session = { token: ensureId(), userId: u.id, createdAt: new Date().toISOString() }$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "session", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^  const session = useState<Session | null>('auth_session', () => null)$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "setItem", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^  const { getItem, setItem, removeItem, ensureId } = useStorage()$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "u", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^    const u = getItem<User | null>('user', null)$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "u", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^    const u: User = { id, email, passwordHash, createdAt: new Date().toISOString() }$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}, {"_type": "tag", "name": "useAuth", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^export function useAuth() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/simple-notes-organizer-159555-159568/notes_frontend/composables/useAuth.ts", "pattern": "/^  const user = useState<User | null>('auth_user', () => null)$/", "language": "TypeScript", "kind": "constant", "scope": "useAuth", "scopeKind": "function"}], "hash": "a440ee1872934ffb928469f191376e45", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/composables/useAuth.ts", "revision_history": [{"23": ""}]}